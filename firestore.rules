rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Allow public read access to published articles
    match /articles/{articleId} {
      // Anyone can read articles
      allow read: if true;

      // Allow writes from anywhere (admin panel will handle authorization)
      // WARNING: This is less secure. Consider implementing Firebase Auth for production
      allow write: if true;
    }

    // Breaking news collection
    match /breaking_news/{newsId} {
      // Anyone can read
      allow read: if true;

      // Allow writes (admin panel handles authorization)
      allow write: if true;
    }

    // AI configuration collection
    match /ai_config/{configId} {
      // Anyone can read (scripts need to access configs)
      allow read: if true;

      // Allow writes (admin panel handles authorization)
      allow write: if true;
    }

    // Newsletter subscribers collection
    match /subscribers/{subscriberId} {
      // Anyone can read (for admin panel and stats)
      allow read: if true;

      // Anyone can create new subscribers (newsletter signup)
      allow create: if true;

      // Allow updates and deletes (for admin panel management)
      // TODO: Consider adding authentication for production
      allow update, delete: if true;
    }

    // Newsletter subscriber groups collection
    match /subscriberGroups/{groupId} {
      // Anyone can read (for admin panel)
      allow read: if true;

      // Allow all writes (for admin panel management)
      // TODO: Consider adding authentication for production
      allow write: if true;
    }

    // Allow public read access to other collections
    match /{document=**} {
      // Anyone can read
      allow read: if true;

      // Block writes by default
      allow write: if false;
    }
  }
}